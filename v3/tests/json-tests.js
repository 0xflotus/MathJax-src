import {MathJax} from 'mathjax/mathjax.js';
export {MathJax} from 'mathjax/mathjax.js';

import 'mathjax/handlers/html.js';
import {LegacyTeX} from 'mathjax/input/legacy/TeX.js';

import {Test} from './tests.js';


class JsonTest extends Test {

  constructor () {
    super();
  }

  // Tests exclusively the timing of the Translate method.
  runTest(name, tex, expected) {
    let html = MathJax.HandlerFor('<html></html>');
    MathJax.HandleRetriesFor(function () {
      html.TestMath(tex).Compile();
      this.startTest(name);
      this.test(name, function(t) {
        t.plan(1);
        t.deepEqual(LegacyTeX.Translate(html.math[0].math, html.math[0].display),
                    expected, name);
        const timeOut = (new Date()).getTime();
        this.stopTest(name);
      }.bind(this));
    }.bind(this)).catch(err => {
        console.log(err.message);
      });
  };
}

let jsonTest = new JsonTest();

jsonTest.runTest('Square', 'x^2',
        {'type':'math',
         'children':[
           {'type':'mrow',
            'inferred':true,
            'children':[
              {'type':'msup',
               'children':[
                 {'type':'mi',
                  'text':'x',
                  'attributes':{}},
                 {'type':'mn',
                  'text':'2',
                  'attributes':{}}],
               'attributes':{}}],
            'attributes':{}}],
         'attributes':{'display':'block'}
        }
       );


jsonTest.runTest('Cube', 'x^3',
        {'type':'math',
         'children':[
           {'type':'mrow',
            'inferred':true,
            'children':[
              {'type':'msup',
               'children':[
                 {'type':'mi',
                  'text':'x',
                  'attributes':{}},
                 {'type':'mn',
                  'text':'3',
                  'attributes':{}}],
               'attributes':{}}],
            'attributes':{}}],
         'attributes':{'display':'block'}
        }
       );


jsonTest.runTest('Quadratic Formula',
        'x = \\frac{-b\\pm\\sqrt{b^2-4ac}}{2a}',
        {'type':'math',
         'children':[
           {'type':'mrow',
            'inferred':true,
            'children':[
              {'type':'mi',
               'text':'x',
               'attributes':{}},
              {'type':'mo',
               'text':'=',
               'attributes':{}},
              {'type':'mfrac',
               'children':[
                 {'type':'mrow',
                  'inferred':true,
                  'children':[
                    {'type':'mo',
                     'text':'−',
                     'attributes':{}},
                    {'type':'mi',
                     'text':'b',
                     'attributes':{}},
                    {'type':'mo',
                     'text':'±',
                     'attributes':{}},
                    {'type':'msqrt',
                     'children':[
                       {'type':'mrow',
                        'inferred':true,
                        'children':[
                          {'type':'msup',
                           'children':[
                             {'type':'mi',
                              'text':'b',
                              'attributes':{}},
                             {'type':'mn',
                              'text':'2',
                              'attributes':{}}],
                           'attributes':{}},
                          {'type':'mo',
                           'text':'−',
                           'attributes':{}},
                          {'type':'mn',
                           'text':'4',
                           'attributes':{}},
                          {'type':'mi',
                           'text':'a',
                           'attributes':{}},
                          {'type':'mi',
                           'text':'c',
                           'attributes':{}}],
                        'attributes':{}}],
                     'attributes':{}}],
                  'attributes':{}},
                 {'type':'mrow',
                  'inferred':true,
                  'children':[
                    {'type':'mn',
                     'text':'2',
                     'attributes':{}},
                    {'type':'mi',
                     'text':'a',
                     'attributes':{}}],
                  'attributes':{}}],
               'attributes':{}}],
            'attributes':{}}],
         'attributes':{'display':'block'}}
       );


jsonTest.runTest('Cauchy-Schwarz Inequality',
        '\\left( \\sum_{k=1}^n a_k b_k \\right)^{\\!\\!2} \\leq' +
        '  \\left( \\sum_{k=1}^n a_k^2 \\right)' +
        '  \\left( \\sum_{k=1}^n b_k^2 \\right)',
        {'type':'math',
         'children':[
           {'type':'mrow',
            'inferred':true,
            'children':[
              {'type':'msup',
               'children':[
                 {'type':'mrow',
                  'children':[
                    {'type':'mo',
                     'text':'(',
                     'attributes':{}},
                    {'type':'munderover',
                     'children':[
                       {'type':'mo',
                        'text':'∑',
                        'attributes':{}},
                       {'type':'mrow',
                        'children':[
                          {'type':'mrow',
                           'inferred':true,
                           'children':[
                             {'type':'mi',
                              'text':'k',
                              'attributes':{}},
                             {'type':'mo',
                              'text':'=',
                              'attributes':{}},
                             {'type':'mn',
                              'text':'1',
                              'attributes':{}}],
                           'attributes':{}}],
                        'attributes':{},
                        'TeXAtom':'ORD'},
                       {'type':'mi',
                        'text':'n',
                        'attributes':{}}],
                     'attributes':{}},
                    {'type':'msub',
                     'children':[
                       {'type':'mi',
                        'text':'a',
                        'attributes':{}},
                       {'type':'mi',
                        'text':'k',
                        'attributes':{}}],
                     'attributes':{}},
                    {'type':'msub',
                     'children':[
                       {'type':'mi',
                        'text':'b',
                        'attributes':{}},
                       {'type':'mi',
                        'text':'k',
                        'attributes':{}}],
                     'attributes':{}},
                    {'type':'mo',
                     'text':')',
                     'attributes':{}}],
                  'attributes':{}},
                 {'type':'mrow',
                  'children':[
                    {'type':'mrow',
                     'inferred':true,
                     'children':[
                       {'type':'mspace',
                        'text':'',
                        'attributes':{'width':'negativethinmathspace'}},
                       {'type':'mspace',
                        'text':'',
                        'attributes':{'width':'negativethinmathspace'}},
                       {'type':'mn',
                        'text':'2',
                        'attributes':{}}],
                     'attributes':{}}],
                  'attributes':{},
                  'TeXAtom':'ORD'}],
               'attributes':{}},
              {'type':'mo',
               'text':'≤',
               'attributes':{}},
              {'type':'mrow',
               'children':[
                 {'type':'mo',
                  'text':'(',
                  'attributes':{}},
                 {'type':'munderover',
                  'children':[
                    {'type':'mo',
                     'text':'∑',
                     'attributes':{}},
                    {'type':'mrow',
                     'children':[
                       {'type':'mrow',
                        'inferred':true,
                        'children':[
                          {'type':'mi',
                           'text':'k',
                           'attributes':{}},
                          {'type':'mo',
                           'text':'=',
                           'attributes':{}},
                          {'type':'mn',
                           'text':'1',
                           'attributes':{}}],
                        'attributes':{}}],
                     'attributes':{},
                     'TeXAtom':'ORD'},
                    {'type':'mi',
                     'text':'n',
                     'attributes':{}}],
                  'attributes':{}},
                 {'type':'msubsup',
                  'children':[
                    {'type':'mi',
                     'text':'a',
                     'attributes':{}},
                    {'type':'mi',
                     'text':'k',
                     'attributes':{}},
                    {'type':'mn',
                     'text':'2',
                     'attributes':{}}],
                  'attributes':{}},
                 {'type':'mo',
                  'text':')',
                  'attributes':{}}],
               'attributes':{}},
              {'type':'mrow',
               'children':[
                 {'type':'mo',
                  'text':'(',
                  'attributes':{}},
                 {'type':'munderover',
                  'children':[
                    {'type':'mo',
                     'text':'∑',
                     'attributes':{}},
                    {'type':'mrow',
                     'children':[
                       {'type':'mrow',
                        'inferred':true,
                        'children':[
                          {'type':'mi',
                           'text':'k',
                           'attributes':{}},
                          {'type':'mo',
                           'text':'=',
                           'attributes':{}},
                          {'type':'mn',
                           'text':'1',
                           'attributes':{}}],
                        'attributes':{}}],
                     'attributes':{},
                     'TeXAtom':'ORD'},
                    {'type':'mi',
                     'text':'n',
                     'attributes':{}}],
                  'attributes':{}},
                 {'type':'msubsup',
                  'children':[
                    {'type':'mi',
                     'text':'b',
                     'attributes':{}},
                    {'type':'mi',
                     'text':'k',
                     'attributes':{}},
                    {'type':'mn',
                     'text':'2',
                     'attributes':{}}],
                  'attributes':{}},
                 {'type':'mo',
                  'text':')',
                  'attributes':{}}],
               'attributes':{}}],
            'attributes':{}}],
         'attributes':{'display':'block'}}
       );



jsonTest.runTest('An Identity of Ramanujan',
        '\\frac{1}{\\Bigl(\\sqrt{\\phi\\sqrt{5}}-\\phi\\Bigr)' +
        '  e^{\\frac25\\pi}} =' +
        '    1+\\frac{e^{-2\\pi}}' +
        '      {1+\\frac{e^{-4\\pi}}' +
        '        {1+\\frac{e^{-6\\pi}}' +
        '          {1+\\frac{e^{-8\\pi}}' +
        '            {1+\\ldots} } } }',
        {'type':'math',
         'children':[
           {'type':'mrow',
            'inferred':true,
            'children':[
              {'type':'mfrac',
               'children':[
                 {'type':'mn',
                  'text':'1',
                  'attributes':{}},
                 {'type':'mrow',
                  'inferred':true,
                  'children':[
                    {'type':'mrow',
                     'children':[
                       {'type':'mrow',
                        'inferred':true,
                        'children':[
                          {'type':'mo',
                           'text':'(',
                           'attributes':{'maxsize':'1.623em',
                                         'minsize':'1.623em'}}],
                        'attributes':{}}],
                     'attributes':{},
                     'TeXAtom':'OPEN'},
                    {'type':'msqrt',
                     'children':[
                       {'type':'mrow',
                        'inferred':true,
                        'children':[
                          {'type':'mi',
                           'text':'ϕ',
                           'attributes':{}},
                          {'type':'msqrt',
                           'children':[
                             {'type':'mrow',
                              'inferred':true,
                              'children':[
                                {'type':'mn',
                                 'text':'5',
                                 'attributes':{}}],
                              'attributes':{}}],
                           'attributes':{}}],
                        'attributes':{}}],
                     'attributes':{}},
                    {'type':'mo',
                     'text':'−',
                     'attributes':{}},
                    {'type':'mi',
                     'text':'ϕ',
                     'attributes':{}},
                    {'type':'mrow',
                     'children':[
                       {'type':'mrow',
                        'inferred':true,
                        'children':[
                          {'type':'mo',
                           'text':')',
                           'attributes':{'maxsize':'1.623em',
                                         'minsize':'1.623em'}}],
                        'attributes':{}}],
                     'attributes':{},
                     'TeXAtom':'CLOSE'},
                    {'type':'msup',
                     'children':[
                       {'type':'mi',
                        'text':'e',
                        'attributes':{}},
                       {'type':'mrow',
                        'children':[
                          {'type':'mrow',
                           'inferred':true,
                           'children':[
                             {'type':'mfrac',
                              'children':[
                                {'type':'mn',
                                 'text':'2',
                                 'attributes':{}},
                                {'type':'mn',
                                 'text':'5',
                                 'attributes':{}}],
                              'attributes':{}},
                             {'type':'mi',
                              'text':'π',
                              'attributes':{}}],
                           'attributes':{}}],
                        'attributes':{},
                        'TeXAtom':'ORD'}],
                     'attributes':{}}],
                  'attributes':{}}],
               'attributes':{}},
              {'type':'mo',
               'text':'=',
               'attributes':{}},
              {'type':'mn',
               'text':'1',
               'attributes':{}},
              {'type':'mo',
               'text':'+',
               'attributes':{}},
              {'type':'mfrac',
               'children':[
                 {'type':'msup',
                  'children':[
                    {'type':'mi',
                     'text':'e',
                     'attributes':{}},
                    {'type':'mrow',
                     'children':[
                       {'type':'mrow',
                        'inferred':true,
                        'children':[
                          {'type':'mo',
                           'text':'−',
                           'attributes':{}},
                          {'type':'mn',
                           'text':'2',
                           'attributes':{}},
                          {'type':'mi',
                           'text':'π',
                           'attributes':{}}],
                        'attributes':{}}],
                     'attributes':{},
                     'TeXAtom':'ORD'}],
                  'attributes':{}},
                 {'type':'mrow',
                  'inferred':true,
                  'children':[
                    {'type':'mn',
                     'text':'1',
                     'attributes':{}},
                    {'type':'mo',
                     'text':'+',
                     'attributes':{}},
                    {'type':'mfrac',
                     'children':[
                       {'type':'msup',
                        'children':[
                          {'type':'mi',
                           'text':'e',
                           'attributes':{}},
                          {'type':'mrow',
                           'children':[
                             {'type':'mrow',
                              'inferred':true,
                              'children':[
                                {'type':'mo',
                                 'text':'−',
                                 'attributes':{}},
                                {'type':'mn',
                                 'text':'4',
                                 'attributes':{}},
                                {'type':'mi',
                                 'text':'π',
                                 'attributes':{}}],
                              'attributes':{}}],
                           'attributes':{},
                           'TeXAtom':'ORD'}],
                        'attributes':{}},
                       {'type':'mrow',
                        'inferred':true,
                        'children':[
                          {'type':'mn',
                           'text':'1',
                           'attributes':{}},
                          {'type':'mo',
                           'text':'+',
                           'attributes':{}},
                          {'type':'mfrac',
                           'children':[
                             {'type':'msup',
                              'children':[
                                {'type':'mi',
                                 'text':'e',
                                 'attributes':{}},
                                {'type':'mrow',
                                 'children':[
                                   {'type':'mrow',
                                    'inferred':true,
                                    'children':[
                                      {'type':'mo',
                                       'text':'−',
                                       'attributes':{}},
                                      {'type':'mn',
                                       'text':'6',
                                       'attributes':{}},
                                      {'type':'mi',
                                       'text':'π',
                                       'attributes':{}}],
                                    'attributes':{}}],
                                 'attributes':{},
                                 'TeXAtom':'ORD'}],
                              'attributes':{}},
                             {'type':'mrow',
                              'inferred':true,
                              'children':[
                                {'type':'mn',
                                 'text':'1',
                                 'attributes':{}},
                                {'type':'mo',
                                 'text':'+',
                                 'attributes':{}},
                                {'type':'mfrac',
                                 'children':[
                                   {'type':'msup',
                                    'children':[
                                      {'type':'mi',
                                       'text':'e',
                                       'attributes':{}},
                                      {'type':'mrow',
                                       'children':[
                                         {'type':'mrow',
                                          'inferred':true,
                                          'children':[
                                            {'type':'mo',
                                             'text':'−',
                                             'attributes':{}},
                                            {'type':'mn',
                                             'text':'8',
                                             'attributes':{}},
                                            {'type':'mi',
                                             'text':'π',
                                             'attributes':{}}],
                                          'attributes':{}}],
                                       'attributes':{},
                                       'TeXAtom':'ORD'}],
                                    'attributes':{}},
                                   {'type':'mrow',
                                    'inferred':true,
                                    'children':[
                                      {'type':'mn',
                                       'text':'1',
                                       'attributes':{}},
                                      {'type':'mo',
                                       'text':'+',
                                       'attributes':{}},
                                      {'type':'mo',
                                       'text':'…',
                                       'attributes':{}}],
                                    'attributes':{}}],
                                 'attributes':{}}],
                              'attributes':{}}],
                           'attributes':{}}],
                        'attributes':{}}],
                     'attributes':{}}],
                  'attributes':{}}],
               'attributes':{}}],
            'attributes':{}}],
         'attributes':{'display':'block'}}
       );


jsonTest.runTest('A Rogers-Ramanujan Identity',
        '1 + \\frac{q^2}{(1-q)}' +
        '  + \\frac{q^6}{(1-q)(1-q^2)} + \\cdots =' +
        '\\prod_{j=0}^{\\infty}' +
        '  \\frac{1}{(1-q^{5j+2})(1-q^{5j+3})},' +
        '     \\quad\\quad \\text{for $|q|<1$}.',
        {'type':'math',
         'children':[
           {'type':'mrow',
            'inferred':true,
            'children':[
              {'type':'mn',
               'text':'1',
               'attributes':{}},
              {'type':'mo',
               'text':'+',
               'attributes':{}},
              {'type':'mfrac',
               'children':[
                 {'type':'msup',
                  'children':[
                    {'type':'mi',
                     'text':'q',
                     'attributes':{}},
                    {'type':'mn',
                     'text':'2',
                     'attributes':{}}],
                  'attributes':{}},
                 {'type':'mrow',
                  'inferred':true,
                  'children':[
                    {'type':'mo',
                     'text':'(',
                     'attributes':{'stretchy':false}},
                    {'type':'mn',
                     'text':'1',
                     'attributes':{}},
                    {'type':'mo',
                     'text':'−',
                     'attributes':{}},
                    {'type':'mi',
                     'text':'q',
                     'attributes':{}},
                    {'type':'mo',
                     'text':')',
                     'attributes':{'stretchy':false}}],
                  'attributes':{}}],
               'attributes':{}},
              {'type':'mo',
               'text':'+',
               'attributes':{}},
              {'type':'mfrac',
               'children':[
                 {'type':'msup',
                  'children':[
                    {'type':'mi',
                     'text':'q',
                     'attributes':{}},
                    {'type':'mn',
                     'text':'6',
                     'attributes':{}}],
                  'attributes':{}},
                 {'type':'mrow',
                  'inferred':true,
                  'children':[
                    {'type':'mo',
                     'text':'(',
                     'attributes':{'stretchy':false}},
                    {'type':'mn',
                     'text':'1',
                     'attributes':{}},
                    {'type':'mo',
                     'text':'−',
                     'attributes':{}},
                    {'type':'mi',
                     'text':'q',
                     'attributes':{}},
                    {'type':'mo',
                     'text':')',
                     'attributes':{'stretchy':false}},
                    {'type':'mo',
                     'text':'(',
                     'attributes':{'stretchy':false}},
                    {'type':'mn',
                     'text':'1',
                     'attributes':{}},
                    {'type':'mo',
                     'text':'−',
                     'attributes':{}},
                    {'type':'msup',
                     'children':[
                       {'type':'mi',
                        'text':'q',
                        'attributes':{}},
                       {'type':'mn',
                        'text':'2',
                        'attributes':{}}],
                     'attributes':{}},
                    {'type':'mo',
                     'text':')',
                     'attributes':{'stretchy':false}}],
                  'attributes':{}}],
               'attributes':{}},
              {'type':'mo',
               'text':'+',
               'attributes':{}},
              {'type':'mo',
               'text':'⋯',
               'attributes':{}},
              {'type':'mo',
               'text':'=',
               'attributes':{}},
              {'type':'munderover',
               'children':[
                 {'type':'mo',
                  'text':'∏',
                  'attributes':{}},
                 {'type':'mrow',
                  'children':[
                    {'type':'mrow',
                     'inferred':true,
                     'children':[
                       {'type':'mi',
                        'text':'j',
                        'attributes':{}},
                       {'type':'mo',
                        'text':'=',
                        'attributes':{}},
                       {'type':'mn',
                        'text':'0',
                        'attributes':{}}],
                     'attributes':{}}],
                  'attributes':{},
                  'TeXAtom':'ORD'},
                 {'type':'mrow',
                  'children':[
                    {'type':'mrow',
                     'inferred':true,
                     'children':[
                       {'type':'mi',
                        'text':'∞',
                        'attributes':{'mathvariant':'normal'}}],
                     'attributes':{}}],
                  'attributes':{},
                  'TeXAtom':'ORD'}],
               'attributes':{}},
              {'type':'mfrac',
               'children':[
                 {'type':'mn',
                  'text':'1',
                  'attributes':{}},
                 {'type':'mrow',
                  'inferred':true,
                  'children':[
                    {'type':'mo',
                     'text':'(',
                     'attributes':{'stretchy':false}},
                    {'type':'mn',
                     'text':'1',
                     'attributes':{}},
                    {'type':'mo',
                     'text':'−',
                     'attributes':{}},
                    {'type':'msup',
                     'children':[
                       {'type':'mi',
                        'text':'q',
                        'attributes':{}},
                       {'type':'mrow',
                        'children':[
                          {'type':'mrow',
                           'inferred':true,
                           'children':[
                             {'type':'mn',
                              'text':'5',
                              'attributes':{}},
                             {'type':'mi',
                              'text':'j',
                              'attributes':{}},
                             {'type':'mo',
                              'text':'+',
                              'attributes':{}},
                             {'type':'mn',
                              'text':'2',
                              'attributes':{}}],
                           'attributes':{}}],
                        'attributes':{},
                        'TeXAtom':'ORD'}],
                     'attributes':{}},
                    {'type':'mo',
                     'text':')',
                     'attributes':{'stretchy':false}},
                    {'type':'mo',
                     'text':'(',
                     'attributes':{'stretchy':false}},
                    {'type':'mn',
                     'text':'1',
                     'attributes':{}},
                    {'type':'mo',
                     'text':'−',
                     'attributes':{}},
                    {'type':'msup',
                     'children':[
                       {'type':'mi',
                        'text':'q',
                        'attributes':{}},
                       {'type':'mrow',
                        'children':[
                          {'type':'mrow',
                           'inferred':true,
                           'children':[
                             {'type':'mn',
                              'text':'5',
                              'attributes':{}},
                             {'type':'mi',
                              'text':'j',
                              'attributes':{}},
                             {'type':'mo',
                              'text':'+',
                              'attributes':{}},
                             {'type':'mn',
                              'text':'3',
                              'attributes':{}}],
                           'attributes':{}}],
                        'attributes':{},
                        'TeXAtom':'ORD'}],
                     'attributes':{}},
                    {'type':'mo',
                     'text':')',
                     'attributes':{'stretchy':false}}],
                  'attributes':{}}],
               'attributes':{}},
              {'type':'mo',
               'text':',',
               'attributes':{}},
              {'type':'mspace',
               'text':'',
               'attributes':{'width':'1em'}},
              {'type':'mspace',
               'text':'',
               'attributes':{'width':'1em'}},
              {'type':'mrow',
               'children':[
                 {'type':'mtext',
                  'text':'for ',
                  'attributes':{}},
                 {'type':'mrow',
                  'children':[
                    {'type':'mrow',
                     'inferred':true,
                     'children':[
                       {'type':'mrow',
                        'children':[
                          {'type':'mrow',
                           'inferred':true,
                           'children':[
                             {'type':'mo',
                              'text':'|',
                              'attributes':{'stretchy':false}}],
                           'attributes':{}}],
                        'attributes':{},
                        'TeXAtom':'ORD'},
                       {'type':'mi',
                        'text':'q',
                        'attributes':{}},
                       {'type':'mrow',
                        'children':[
                          {'type':'mrow',
                           'inferred':true,
                           'children':[
                             {'type':'mo',
                              'text':'|',
                              'attributes':{'stretchy':false}}],
                           'attributes':{}}],
                        'attributes':{},
                        'TeXAtom':'ORD'},
                       {'type':'mo',
                        'text':'<',
                        'attributes':{}},
                       {'type':'mn',
                        'text':'1',
                        'attributes':{}}],
                     'attributes':{}}],
                  'attributes':{},
                  'TeXAtom':'ORD'}],
               'attributes':{}},
              {'type':'mo',
               'text':'.',
               'attributes':{}}],
            'attributes':{}}],
         'attributes':{'display':'block'}}
       );


jsonTest.runTest('A Summation Formula',
        '\\sum_{n=1}^\\infty {1\\over n^2} = {\\pi^2\\over 6}',
        {'type':'math',
         'children':[
           {'type':'mrow',
            'inferred':true,
            'children':[
              {'type':'munderover',
               'children':[
                 {'type':'mo',
                  'text':'∑',
                  'attributes':{}},
                 {'type':'mrow',
                  'children':[
                    {'type':'mrow',
                     'inferred':true,
                     'children':[
                       {'type':'mi',
                        'text':'n',
                        'attributes':{}},
                       {'type':'mo',
                        'text':'=',
                        'attributes':{}},
                       {'type':'mn',
                        'text':'1',
                        'attributes':{}}],
                     'attributes':{}}],
                  'attributes':{},
                  'TeXAtom':'ORD'},
                 {'type':'mi',
                  'text':'∞',
                  'attributes':{'mathvariant':'normal'}}],
               'attributes':{}},
              {'type':'mrow',
               'children':[
                 {'type':'mrow',
                  'inferred':true,
                  'children':[
                    {'type':'mfrac',
                     'children':[
                       {'type':'mn',
                        'text':'1',
                        'attributes':{}},
                       {'type':'msup',
                        'children':[
                          {'type':'mi',
                           'text':'n',
                           'attributes':{}},
                          {'type':'mn',
                           'text':'2',
                           'attributes':{}}],
                        'attributes':{}}],
                     'attributes':{}}],
                  'attributes':{}}],
               'attributes':{},
               'TeXAtom':'ORD'},
              {'type':'mo',
               'text':'=',
               'attributes':{}},
              {'type':'mrow',
               'children':[
                 {'type':'mrow',
                  'inferred':true,
                  'children':[
                    {'type':'mfrac',
                     'children':[
                       {'type':'msup',
                        'children':[
                          {'type':'mi',
                           'text':'π',
                           'attributes':{}},
                          {'type':'mn',
                           'text':'2',
                           'attributes':{}}],
                        'attributes':{}},
                       {'type':'mn',
                        'text':'6',
                        'attributes':{}}],
                     'attributes':{}}],
                  'attributes':{}}],
               'attributes':{},
               'TeXAtom':'ORD'}],
            'attributes':{}}],
         'attributes':{'display':'block'}}
       );


jsonTest.runTest('Cauchy\'s Integral Formula',
        'f(a) = \\oint_\\gamma \\frac{f(z)}{z-a}dz',
        {'type':'math',
         'children':[
           {'type':'mrow',
            'inferred':true,
            'children':[
              {'type':'mi',
               'text':'f',
               'attributes':{}},
              {'type':'mo',
               'text':'(',
               'attributes':{'stretchy':false}},
              {'type':'mi',
               'text':'a',
               'attributes':{}},
              {'type':'mo',
               'text':')',
               'attributes':{'stretchy':false}},
              {'type':'mo',
               'text':'=',
               'attributes':{}},
              {'type':'msub',
               'children':[
                 {'type':'mo',
                  'text':'∮',
                  'attributes':{}},
                 {'type':'mi',
                  'text':'γ',
                  'attributes':{}}],
               'attributes':{}},
              {'type':'mfrac',
               'children':[
                 {'type':'mrow',
                  'inferred':true,
                  'children':[
                    {'type':'mi',
                     'text':'f',
                     'attributes':{}},
                    {'type':'mo',
                     'text':'(',
                     'attributes':{'stretchy':false}},
                    {'type':'mi',
                     'text':'z',
                     'attributes':{}},
                    {'type':'mo',
                     'text':')',
                     'attributes':{'stretchy':false}}],
                  'attributes':{}},
                 {'type':'mrow',
                  'inferred':true,
                  'children':[
                    {'type':'mi',
                     'text':'z',
                     'attributes':{}},
                    {'type':'mo',
                     'text':'−',
                     'attributes':{}},
                    {'type':'mi',
                     'text':'a',
                     'attributes':{}}],
                  'attributes':{}}],
               'attributes':{}},
              {'type':'mi',
               'text':'d',
               'attributes':{}},
              {'type':'mi',
               'text':'z',
               'attributes':{}}],
            'attributes':{}}],
         'attributes':{'display':'block'}}
       );

jsonTest.runTest('Standard Deviation',
        '\\sigma = \\sqrt{\\frac{1}{N}\\sum_{i=1}^N {(x_i-\\mu)}^2}',
        {'type':'math',
         'children':[
           {'type':'mrow',
            'inferred':true,
            'children':[
              {'type':'mi',
               'text':'σ',
               'attributes':{}},
              {'type':'mo',
               'text':'=',
               'attributes':{}},
              {'type':'msqrt',
               'children':[
                 {'type':'mrow',
                  'inferred':true,
                  'children':[
                    {'type':'mfrac',
                     'children':[
                       {'type':'mn',
                        'text':'1',
                        'attributes':{}},
                       {'type':'mi',
                        'text':'N',
                        'attributes':{}}],
                     'attributes':{}},
                    {'type':'munderover',
                     'children':[
                       {'type':'mo',
                        'text':'∑',
                        'attributes':{}},
                       {'type':'mrow',
                        'children':[
                          {'type':'mrow',
                           'inferred':true,
                           'children':[
                             {'type':'mi',
                              'text':'i',
                              'attributes':{}},
                             {'type':'mo',
                              'text':'=',
                              'attributes':{}},
                             {'type':'mn',
                              'text':'1',
                              'attributes':{}}],
                           'attributes':{}}],
                        'attributes':{},
                        'TeXAtom':'ORD'},
                       {'type':'mi',
                        'text':'N',
                        'attributes':{}}],
                     'attributes':{}},
                    {'type':'msup',
                     'children':[
                       {'type':'mrow',
                        'children':[
                          {'type':'mrow',
                           'inferred':true,
                           'children':[
                             {'type':'mo',
                              'text':'(',
                              'attributes':{'stretchy':false}},
                             {'type':'msub',
                              'children':[
                                {'type':'mi',
                                 'text':'x',
                                 'attributes':{}},
                                {'type':'mi',
                                 'text':'i',
                                 'attributes':{}}],
                              'attributes':{}},
                             {'type':'mo',
                              'text':'−',
                              'attributes':{}},
                             {'type':'mi',
                              'text':'μ',
                              'attributes':{}},
                             {'type':'mo',
                              'text':')',
                              'attributes':{'stretchy':false}}],
                           'attributes':{}}],
                        'attributes':{},
                        'TeXAtom':'ORD'},
                       {'type':'mn',
                        'text':'2',
                        'attributes':{}}],
                     'attributes':{}}],
                  'attributes':{}}],
               'attributes':{}}],
            'attributes':{}}],'attributes':{'display':'block'}}
       );


jsonTest.printTime();
